h1. Quick installation guide for Bloonix on CentOS 7

h2. Install at first the EPEL repository

bc. sudo yum install epel-release

h2. Install the Bloonix repository

bc. sudo rpm -ivh https://download.bloonix.de/repos/centos/7/noarch/bloonix-release-0.5-1.el7.centos.noarch.rpm

h2. Install the Elasticsearch repository

bc. sudo rpm --import https://packages.elasticsearch.org/GPG-KEY-elasticsearch
sudo vim /etc/yum.repos.d/elasticsearch.repo

p. Insert:

bc. [elasticsearch-1.4]
name=Elasticsearch repository for 1.4.x packages
baseurl=http://packages.elasticsearch.org/elasticsearch/1.4/centos
gpgcheck=1
gpgkey=http://packages.elasticsearch.org/GPG-KEY-elasticsearch
enabled=1

h2. Install base components

bc. sudo yum install \
    nginx \
    postgresql-server \
    elasticsearch \
    java-1.7.0-openjdk

h2. Install Bloonix components and some plugins

bc. sudo yum install \
    bloonix-webgui \
    bloonix-server \
    bloonix-agent \
    bloonix-plugins-basic \
    bloonix-plugins-linux

h2. PostgreSQL

h2. Init PostgreSQL

bc. sudo service postgresql initdb

h2. Configure PostgreSQL

p. Edit __/var/lib/pgsql/data/postgresql.conf__ and configure PostgreSQL to listen on localhost:

bc. sudo vim /var/lib/pgsql/data/postgresql.conf

p. Set:

bc. listen_addresses = 'localhost'

p. or execute the following command:

bc. sudo sed -i 's/^#listen_addresses /listen_addresses/' /var/lib/pgsql/data/postgresql.conf

p. Edit __/var/lib/pgsql/data/pg_hba.conf__ and configure PostgreSQL to allow to connect with username and password:

bc. sudo vim /var/lib/pgsql/data/pg_hba.conf

p. Replace the following lines:

==
<pre> <del>host    all             all             127.0.0.1/32            ident</del>
<del>host    all             all             ::1/128                ident</del>
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                md5
</pre>
==

p. or execute the following commands:

bc. sudo sed -i 's/\(host  *all  *all  *127.0.0.1\/32  *\)ident/\1md5/' /var/lib/pgsql/data/pg_hba.conf
sudo sed -i 's/\(host  *all  *all  *::1\/128  *\)ident/\1md5/' /var/lib/pgsql/data/pg_hba.conf

h2. Restart PostgreSQL

sudo systemctl restart postgresql.service

h2. Nginx

p. Edit __/etc/nginx/nginx.conf__:

bc. sudo vim /etc/nginx/nginx.conf

p. and insert the following line:

bc. include /etc/bloonix/webgui/nginx.conf; # insert this line
include /etc/nginx/conf.d/*.conf;       # above this line

h2. Start Elasticsearch and Nginx

bc. sudo systemctl start elasticsearch.service
sudo systemctl start nginx.service

h2. Init Bloonix template for Elasticsearch

bc. sudo /srv/bloonix/webgui/schema/init-elasticsearch localhost:9200

h2. Init Bloonix schema for PostgreSQL

bc. sudo /srv/bloonix/webgui/schema/init-database

h2. Configure the agent

p. Edit the configuration of the Bloonix Agent and configure the section "server"

bc. sudo vim /etc/bloonix/agent/main.conf

p. Set in section server{}:

bc.. # Bloonix-Server hostname
    host demo.bloonix.org

    # We use a self signed certificate and have to turn off certificate validation
    ssl_verify_mode none

h2. Start all Bloonix services

bc. sudo systemctl start bloonix-webgui.service
sudo systemctl start bloonix-server.service
sudo systemctl start bloonix-srvchk.service
sudo systemctl start bloonix-agent.service

h2. Ready to rumble

p. Done! :-) Now you can login into the WebGUI. The initial username and password is __admin/admin__
